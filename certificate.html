<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harishkumar-Certificates</title>
<!-- Default favicon -->
<link id="favicon-light" rel="icon" href="icons/dark.png" type="image/png">
<link id="favicon-dark" rel="icon" href="icons/light.png" type="image/png" media="(prefers-color-scheme: dark)">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>

/* ===========================
   FONT-FACES
=========================== */
@font-face {font-family:"OldNewspaperTypes";src:url("fonts/OldNewspaperTypes.ttf") format("truetype");}
@font-face {font-family:"SubwayNovella-KEw7";src:url("fonts/SubwayNovella-KEw7.ttf") format("truetype");}
@font-face {font-family:"Docktrin";src:url("fonts/docktrin.ttf") format("truetype");}
@font-face {font-family:"Break";src:url("fonts/Break.ttf") format("truetype");}
@font-face {font-family:"Newton Howard Font";src:url("fonts/Newton Howard Font.ttf") format("truetype");}
@font-face {font-family:"Spell of Asia";src:url("fonts/Spell of Asia.ttf") format("truetype");}
@font-face {font-family:"RingbearerMedium-51mgZ";src:url("fonts/RingbearerMedium-51mgZ.ttf") format("truetype");}
@font-face {font-family:"dogicapixel";src:url("fonts/dogicapixel.ttf") format("truetype");}
@font-face {font-family:"Times New Roman Regular";src:url("fonts/Times New Roman Regular.ttf") format("truetype");}


/* Reset & body */

body { background: #020E01; color: #fff; overflow-x: hidden; }

/* Portfolio section */
.portfolio-section { max-width: 92%; margin: 0px auto;  padding: 20px; }
.section-title { 
    text-align: center; 
    font-size: 2.8em;
    font-family:"Newton Howard Font",sans-serif;
    font-weight:normal;
    margin-top: 6%; 
    text-transform: uppercase; 
    letter-spacing: 2px; 
background: linear-gradient(90deg, #7edc9c, #82e3b3, #6ccf88);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;}




/* ===========================
   HEADER
=========================== */
header {
  position:fixed;top:1%;left:50%;transform:translateX(-50%);
  width:88%;background:transparent;backdrop-filter:blur(50px);
  display:flex;justify-content:space-around;align-items:center;
  padding:18px 36px;border-radius:20px;z-index:1001;
  box-shadow:0 2px 10px rgba(0,0,0,0.2);
}
header .logo {font-family:"Break",sans-serif;font-size:1.5rem;color:#fff;margin-right:auto;}
header nav {display:flex;gap:30px;margin-left:auto;}
header nav a {color:#fff;text-decoration:none;font-family:"Times New Roman Regular",sans-serif;font-size:0.9rem;transition:color 0.3s;}
header nav a:hover {color:rgba(196, 255, 204, 0.7);} /* Adjusted hover to green */
header nav a.active {color:#82cd93;border-bottom:2px solid #82cd93;} /* Changed from purple to green */


/* ===========================
   LOADING
=========================== */
/* Loader overlay */
#page-loader {
  position: fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#202628;
  z-index: 3000;
  transition: opacity 0.6s ease;
}

#page-loader.fade-out {
  opacity: 0;
  pointer-events: none;
}

/* Loader circle */
.loader-circle-87 {
    height: 50px;
    width: 50px;
    position: relative;
}
.loader-circle-87::after,
.loader-circle-87::before {
    content: "";
    width: 50px;
    height: 50px;
    position: absolute;
    border: solid 8px transparent;
    border-radius: 50%;
    animation: loader-circle-87-spin 1.4s ease infinite;
}
.loader-circle-87::before {
    border-top-color: #cddc39;
    border-bottom-color: #ff9800;
}
.loader-circle-87::after {
    border-left-color: #03a9f4;
    border-right-color: #e91e63;
    animation-delay: 0.7s;
}

@keyframes loader-circle-87-spin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(0.5); }
    100% { transform: rotate(360deg) scale(1); }
}




.media-loader {
    /* Style for a simple spinning loader */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50px;
    height: 50px;
    border: 5px solid rgba(255, 255, 255, 0.2);
    border-top: 5px solid #ffffff; /* Loader color */
    border-radius: 50%;
    animation: spin 1s linear infinite;
    z-index: 10; /* Ensure it's above the blank background */
}

@keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}


/* Apply to all media elements (img, video) that are in fullscreen mode */
:fullscreen img,
:fullscreen video,
:-webkit-full-screen img,
:-webkit-full-screen video,
:-moz-full-screen img,
:-moz-full-screen video,
:-ms-fullscreen img,
:-ms-fullscreen video {
    /* The key property: ensures the entire image/video is visible */
    object-fit: contain !important; 
    
    /* Ensure it fills the entire fullscreen container */
    width: 100% !important;
    height: 100% !important;
    
    /* Set the background to black for the "letterbox" areas */
    background-color: black !important;
}

/* Specific fix for the .zoomed-content class on media in fullscreen */
.zoomed-content:fullscreen,
.zoomed-content:-webkit-full-screen {
    object-fit: contain !important;
    width: 100% !important;
    height: 100% !important;
}





/* ===========================
WORK CARD 
=========================== */

/* Grid */
.works-grid { 
    display: grid; 
    grid-template-columns: repeat(4, 1fr);
    gap: 25px; 
    position: relative;
}


/* Update work-card to avoid fixed height */
.work-card {
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    background: #2a2a2a;
    cursor: pointer;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    pointer-events: auto;
    will-change: transform, top, left, width, height;
    display: flex; /* Use flex to allow content to dictate size */
    flex-direction: column;
padding:0 10px;
margin-bottom: 10px;

}

/* Remove fixed height for work-image, let it adjust naturally */
.work-image {
    width: 100%;
    height: auto; /* Changed from fixed 220px */
    max-height: 220px; /* Optional: cap the height to prevent overly large images */
    object-fit: cover;
    clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
    transition: all 0.4s ease, clip-path 0.4s ease;
}

/* Adjust zoomed state to be more flexible */
.work-card.zoomed {
    z-index: 1000;
    box-shadow: 0 0px 18px rgba(196, 255, 204, 0.8);
    overflow: visible;
    display: flex;
padding:0;

    flex-direction: column;
    max-width: 600px;
    width: 90%;
    height: auto; /* Allow height to adjust based on content */
    min-height: auto; /* Remove fixed min-height */
}

/* Ensure work-media-zoom adjusts dynamically */
.work-card.zoomed .work-media-zoom {
    height: auto; /* Changed from fixed 300px */
    max-height: 300px; /* Optional: cap the height */
    display: block;
}

/* Update mobile-specific styles */
@media (max-width: 768px) {
    .work-image {
        height: auto; /* Changed from fixed 150px */
        max-height: 150px; /* Optional: cap the height */
    }

    .work-card.zoomed {
        width: 95%;
        max-width: none;
        height: auto; /* Allow height to adjust */
        min-height: auto; /* Remove fixed min-height */
    }

    .work-card.zoomed .work-media-zoom {
        height: 0;
        padding-top: 56.25%; /* Maintain 16:9 aspect ratio */
        position: relative;
    }
}

.work-card:hover { 
    transform: perspective(1000px) rotateY(10deg) rotateX(5deg);
    box-shadow: 0 8px 16px rgba(196, 255, 204, 0.8); /* Adjusted hover shadow to green */
}

.work-overlay {
    padding: 10px; /* Reduced padding to minimize vertical space */
    text-align: center;
    z-index: 2;
    position: relative;
}

.work-title {
    font-size: 1.2em;
    color: #82cd93;
    font-family: "RingbearerMedium-51mgZ", sans-serif;
    font-weight: normal;
    opacity: 1;
    margin-top: 15px;
margin-left:15px;
margin-right:15px;
    font-family: "dogicapixel", sans-serif;

 /* Remove default margin */
}

.work-description {
    font-size: 1em;
    font-family: "poppins", sans-serif;
    color: #ccc;
    opacity: 1;
    margin: 20px; /* Small top margin for minimal spacing */
}
.work-card.zoomed .work-description {
    margin-bottom: 0; /* Ensure no bottom margin in zoomed state */
}
/* Mobile-specific adjustments */
@media (max-width: 768px) {
    .work-overlay {
        padding: 8px; /* Further reduce padding on mobile */
    }

    .work-title {
        font-size: 1rem;
    }

    .work-description {
        font-size: 0.95rem;
    margin: 0; /* Small top margin for minimal spacing */

    }
}


/* New styles for media control buttons */
.media-controls {
    position: absolute;
    bottom: 10px;
    right: 10px;
    display: flex;
    gap: 10px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
    z-index: 1002;
}

.work-card.zoomed .media-controls {
    opacity: 1;
    visibility: visible;
}

.media-button {
    background: #000; /* Match existing green theme */
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    color: #8DB255;
    font-size: 1.2em;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
}

.media-button:hover {
    background: #182D09; /* Darker green for hover */
}

/* Mobile-specific styles */
@media (max-width: 768px) {
    .media-controls {
        bottom: 8px;
        right: 8px;
        gap: 8px;
    }

    .media-button {
        width: 32px;
        height: 32px;
        font-size: 1em;
    }
}



/* --- NEW MEDIA SWAP STYLES --- */
.work-media-zoom {
    width: 100%;
    height: 0; /* Initially collapse the container */
    overflow: hidden;
    position: relative;
    border-radius: 10px 10px 0 0;

    clip-path: none !important; 
    flex-shrink: 0;
    transition: height 0.4s ease; 
    display: none; /* Hide container when not zoomed */
}



.work-media-zoom video,
.work-media-zoom img.zoomed-content {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.work-card.zoomed .work-image {
    display: none; /* Hide the static JPG when zoomed */
}
/* --- END NEW MEDIA STYLES --- */



.work-card.zoomed .work-image { 
    height: 300px;
    clip-path: none;
    flex-shrink: 0;
}

/* Close button */
.close-button {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #ff4d4d; /* Red, kept as is for alert/close */
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    color: #fff;
    font-size: 1.2em;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
    z-index: 1001;
}
.work-card.zoomed .close-button { 
    opacity: 1; 
    visibility: visible; 
}
.close-button:hover { 
    background: #cc0000; /* Darker red, kept as is */
}

/* Expanded Details Section */
.work-details {
   padding:0;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: opacity 0.4s ease, max-height 0.4s ease;
    z-index: 3;
    background: #2a2a2a;
    position: relative;
    flex-grow: 1;
}
.work-card.zoomed .work-details {
    opacity: 1;
    max-height: 1000px;
    border-radius: 50px;

    padding: 20px;
    visibility: visible;
}
.work-details p {
    margin-bottom: 15px;
font-family:"poppins",sans-serif;

    line-height: 1.6;
    color: #e0e0e0;
}

/* Placeholder styling */
.placeholder {
    display: block;
    width: 100%;
    height: 100%;
    visibility: hidden;
    transition: width 0.4s ease, height 0.4s ease; 
}

/* Responsive */
@media (max-width: 768px) {
    .works-grid { 
        grid-template-columns: 1fr; 
    }
    .work-image { 
        height: 260px; 
    }

    .work-card.zoomed .work-image { 
        height: 200px; 
    }
}



 /* Mobile-specific styles */
@media (max-width: 768px) {
  .work-card.zoomed .work-media-zoom {
    height: 0;           /* reset fixed height */
    padding-top: 56.25%; /* 16:9 aspect ratio (9/16 = 0.5625) */
    position: relative;  /* for absolute child positioning */
  }

  .work-card.zoomed .work-media-zoom video,
  .work-card.zoomed .work-media-zoom img.zoomed-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px 10px 0 0;
  }
}


/* Responsive */
/* ===========================
   📱 MOBILE COMPACT VERSION
=========================== */
@media (max-width: 768px) {

  /* ===== BODY ===== */
  body {
    background: #020E01;
    color: #fff;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }

  /* HEADER */
  header {
    width: 88%;
    padding: 10px 18px;
    border-radius: 12px;
    justify-content: space-between;
  }

  header .logo {
    font-size: 1.3rem;
    letter-spacing: 1px;
  }

  /* HAMBURGER */
  .hamburger {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 22px;
    height: 16px;
    cursor: pointer;
    z-index: 1001;
  }

  .hamburger span {
    display: block;
    height: 2px;
    width: 100%;
    background: #fff;
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  /* Animate when active */
  .hamburger.active span:nth-child(1) {
    transform: translateY(6px) rotate(45deg);
  }
  .hamburger.active span:nth-child(2) {
    opacity: 0;
  }
  .hamburger.active span:nth-child(3) {
    transform: translateY(-6px) rotate(-45deg);
  }

  /* MENU PANEL */
  header nav {
    position: fixed;
    top: 0%;
    right: -100%;
    width: 55%; 
    height: 100vh; 
    border-left: 2px solid #82cd93; 
    border-bottom-left-radius: 20px; 
    background: #020E01; 
    backdrop-filter: blur(8px); 
    box-shadow: -10px 0 30px rgba(0, 0, 0, 0.6); 
    display: flex;
    flex-direction: column;
    align-items: flex-start; 
    justify-content: flex-start; 
    padding-top: 100px; 
    padding-left: 30px; 
    gap: 1.8rem; 
    transition: right 0.4s cubic-bezier(0.7, 0, 0.3, 1); 
    z-index: 1000;
  }

  header nav.active {
    right: 0;
  }

 header nav a {
  position: relative;
  text-decoration: none;
  color: #fff;
  font-size: 0.95rem;
  transition: color 0.3s ease;
}

header nav a::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -3px;
  transform: translateX(-50%);
  width: 0%;
  height: 2px;
  background: #82cd93;
  transition: width 0.3s ease;
  border-radius: 2px;
}

header nav a:hover::after {
  width: 100%;
}


  /* ===== SECTION TITLES ===== */
  .section-title {
    font-size: 2em;
    margin-top: 70px;
    letter-spacing: 1px;
  }
h4 {     font-size: 1em;
    margin-top: 10px;
    margin-bottom: 10px;

}


  /* ===== GRID ===== */
  .works-grid {
    grid-template-columns: repeat(1, 1fr);
    gap: 14px;
    margin-top: 0;
  }

  .work-card {
    border-radius: 8px;
  margin: 10px 0; /* remove any extra margin */

  }








  .close-button {
    width: 32px;
    height: 32px;
    font-size: 1rem;
  }

  /* ===== DETAILS ===== */
  .work-details {
    font-size: 0.95rem;
    padding: 15px;
  }



  /* ===== LOADER ===== */
  .loader-circle-87 {
    height: 35px;
    width: 35px;
  }
}

 /* Mobile-specific styles */
@media (max-width: 768px) {
  .work-card.zoomed .work-media-zoom {
    height: 0;           /* reset fixed height */
    padding-top: 56.25%; /* 16:9 aspect ratio (9/16 = 0.5625) */
    position: relative;  /* for absolute child positioning */
  }

  .work-card.zoomed .work-media-zoom video,
  .work-card.zoomed .work-media-zoom img.zoomed-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px 10px 0 0;
  }
}


/* ===========================
   DEFAULT (DESKTOP) NAV BUTTON STYLES
   =========================== */
.nav-button {
    /* Desktop Size/Appearance */
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #82cd93;
    color: black;
    font-size: 1.5em;
    border: none;
    cursor: pointer;
}

/* Position for previous button */
#prevButton {
    left: 20px; /* Desktop distance from the left */
}

/* Position for next button */
#nextButton {
    right: 20px; /* Desktop distance from the right */
}

.nav-button:hover {
    background: #82cd93; /* Subtle hover effect */
}


/* ===========================
   MOBILE NAV BUTTON STYLES (Max-width 768px)
   =========================== */
@media (max-width: 768px) {
    .nav-button {
        /* Reduce size for mobile tapping area */
        width: 40px; 
        height: 40px;
        /* Smaller font size */
        font-size: 1.2em;
    }
    
    #prevButton {
        left: 10px; /* Move closer to the edge on mobile */
    }

    #nextButton {
        right: 10px; /* Move closer to the edge on mobile */
    }
}

@media (min-width: 700px) and (max-width: 999px) {
  body {
    margin-top: 10%;
  }
  
  /* Update grid layout for medium screens */
  .works-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
    margin-top: 20px;
  }
  

}
@media (min-width: 1000px) and (max-width: 1300px) {
  body {
    margin-top: 10%;
  }
  
  /* Update grid layout for medium screens */
  .works-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    margin-top: 20px;
  }


}


</style>
</head>
<body>
<div id="page-loader">
  <div class="loader-circle-87"></div>
</div>




  <header>
  <div class="logo">Portfolio</div>
  <div class="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <nav>
    <a href="index.html">HOME</a>
    <a href="works.html">WORKS</a>
    <a href="certificate.html" class="active">CERTIFICATE</a>
    <a href="resume.html">RESUME</a>
    <a href="contact.html">CONTACT</a>
  </nav>
</header>
        <h2 class="section-title">My Certificates</h2>



  
<section class="portfolio-section">
        <div class="works-grid">
            

<div class="work-card" data-video-src="Works/Certificate/Certificate-srinivasa-ramannujam-Maths-by-iste-tamilnadu.jpg">
    <img src="Works/Certificate/Certificate-srinivasa-ramannujam-Maths-by-iste-tamilnadu.jpg" alt="Srinivasa Ramanujan Maths" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Srinivasa Ramanujan Maths (ISTE)</h3>
        <p class="work-description">Achievement in the Mathematics competition/event organized by ISTE Tamil Nadu section.</p>
    </div>
    <div class="work-details">
        <p>This document verifies successful participation and achievement in the Srinivasa Ramanujan Mathematics competition or event, conducted by the ISTE Tamil Nadu Section.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Achiever</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate-Infosys-html5.jpg">
    <img src="Works/Certificate/Certificate-Infosys-html5.jpg" alt="Infosys HTML5" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Infosys HTML5</h3>
        <p class="work-description">Certificate of competency in HTML5 web development from Infosys.</p>
    </div>
    <div class="work-details">
        <p>Completion from Infosys for demonstrating proficiency and knowledge in modern HTML5 standards and practices for web development.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee/Achiever</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate for Harishkumar R for _EMBEDDED SYSTEM BASIC AND A...jpg">
    <img src="Works/Certificate/Certificate for Harishkumar R for _EMBEDDED SYSTEM BASIC AND A...jpg" alt="Embedded System Basics" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Embedded System Basics</h3>
        <p class="work-description">Document for foundational knowledge in Embedded System basics and applications.</p>
    </div>
    <div class="work-details">
        <p>Confirmation of training and basic knowledge in Embedded Systems, covering core principles and essential applications in hardware-software integration.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2021</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate Harishkumar R[Python]-at-great-learning.jpg">
    <img src="Works/Certificate/Certificate Harishkumar R[Python]-at-great-learning.jpg" alt="Python Programming Great Learning" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Python Programming <br>(Great Learning)</h3>
        <p class="work-description">Training completion in Python programming through the Great Learning platform.</p>
    </div>
    <div class="work-details">
        <p>Certificate of training completion in Python, demonstrating foundational programming skills in the language, provided by Great Learning.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2021</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate Infosys (Harishkumar)-python.jpg">
    <img src="Works/Certificate/Certificate Infosys (Harishkumar)-python.jpg" alt="Infosys Python Training" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Infosys Python Training</h3>
        <p class="work-description">Completion of a dedicated Python programming course from Infosys.</p>
    </div>
    <div class="work-details">
        <p>A document verifying the successful completion of a specialized Python programming course offered as part of Infosys training.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate Internship [Kodasy]-1.jpg">
    <img src="Works/Certificate/Certificate Internship [Kodasy]-1.jpg" alt="Kodasy Internship" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Internship Completion (Kodasy)</h3>
        <p class="work-description">Certificate marking the successful completion of an internship program at Kodasy.</p>
    </div>
    <div class="work-details">
        <p>Confirmation of successfully completing a professional internship at Kodasy, indicating hands-on experience in a relevant technical field.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Intern</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate MIET J&K-1.jpg">
    <img src="Works/Certificate/Certificate MIET J&K-1.jpg" alt="MIET J&K" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">MIET J&K Event</h3>
        <p class="work-description">Document of participation or achievement from an event held at MIET, J&K.</p>
    </div>
    <div class="work-details">
        <p>Recognition for participation or successful completion of a workshop, seminar, or competition organized by MIET, Jammu & Kashmir.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Participant</p>
            <p><strong>Year:</strong> 2021</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate[Video_edit_participate]-idhaya-college-karaikudi.jpg">
    <img src="Works/Certificate/Certificate[Video_edit_participate]-idhaya-college-karaikudi.jpg" alt="Video Editing Participation" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Video Editing Participation (Idhaya)</h3>
        <p class="work-description">Document acknowledging participation in a video editing event at Idhaya College, Karaikudi.</p>
    </div>
    <div class="work-details">
        <p>Confirmation of involvement in a video editing competition or workshop hosted by Idhaya College, Karaikudi, validating interest in creative media and post-production skills.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Participant</p>
            <p><strong>Year:</strong> 2020</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate[VISA]-token-service-technology-virtual-experience-program.jpg">
    <img src="Works/Certificate/Certificate[VISA]-token-service-technology-virtual-experience-program.jpg" alt="VISA Virtual Experience Program" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">VISA Virtual Experience Program</h3>
        <p class="work-description">Completion of the VISA Token Service Technology Virtual Experience Program.</p>
    </div>
    <div class="work-details">
        <p>This document verifies the successful completion of the Token Service Technology Virtual Experience Program offered by VISA, showcasing exposure to fintech and digital tokenization concepts.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate_presentation_skills-harward.jpg">
    <img src="Works/Certificate/Certificate_presentation_skills-harward.jpg" alt="Harvard Presentation Skills" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Harvard Presentation Skills</h3>
        <p class="work-description">Document for successfully completing training in advanced presentation skills.</p>
    </div>
    <div class="work-details">
        <p>Confirmation of training in presentation and public speaking skills, demonstrating the ability to communicate ideas clearly and effectively in a professional setting.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Harishkumar R Internship-techy-it-solution.jpg">
    <img src="Works/Certificate/Harishkumar R Internship-techy-it-solution.jpg" alt="Techy IT Solution Internship" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Techy IT Solution Internship</h3>
        <p class="work-description">Document confirming the successful completion of an internship at Techy IT Solution.</p>
    </div>
    <div class="work-details">
        <p>Official document verifying the duration and responsibilities fulfilled during a professional internship at Techy IT Solution, showcasing practical industry experience.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Intern</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Hariskumar R inplant-techy-it-solution.jpg">
    <img src="Works/Certificate/Hariskumar R inplant-techy-it-solution.jpg" alt="Techy IT Solution Inplant Training" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Techy IT Solution Inplant Training</h3>
        <p class="work-description">Document of completion for Inplant Training at Techy IT Solution.</p>
    </div>
    <div class="work-details">
        <p>Confirmation of Inplant Training completion at Techy IT Solution, providing exposure to real-world industrial environments and processes.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2022</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate-design-and-stimulate-wearable-antenna-at-kit(kalaignarkarunanidhi)collegecbe.jpg">
    <img src="Works/Certificate/Certificate-design-and-stimulate-wearable-antenna-at-kit(kalaignarkarunanidhi)collegecbe.jpg" alt="KIT Wearable Antenna" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Design & Simulation of Wearable Antenna</h3>
        <p class="work-description">Workshop completion on wearable antenna design at KIT College, CBE.</p>
    </div>
    <div class="work-details">
        <p>Document for completing a specialized program on designing and simulating wearable antenna technology at Kalaignarkarunanidhi Institute of Technology (KIT), Coimbatore.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2023</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate-paper-presentation-antenna-at-jit(jansons)collegecbe.jpg">
    <img src="Works/Certificate/Certificate-paper-presentation-antenna-at-jit(jansons)collegecbe.jpg" alt="JIT Antenna Paper Presentation" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">Paper Presentation on Antenna (JIT)</h3>
        <p class="work-description">Document for presenting a technical paper on Antenna at JIT College, CBE.</p>
    </div>
    <div class="work-details">
        <p>Recognition for presenting a technical paper on Antenna technology at Jansons Institute of Technology (JIT), Coimbatore, demonstrating research and presentation abilities.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Presenter</p>
            <p><strong>Year:</strong> 2023</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate-MATLAB-at-kit(kalaignarkarunanidhi)collegecbe.jpg">
    <img src="Works/Certificate/Certificate-MATLAB-at-kit(kalaignarkarunanidhi)collegecbe.jpg" alt="KIT MATLAB Training" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">MATLAB Programming Training (KIT)</h3>
        <p class="work-description">Document for completing a training program in MATLAB at KIT College, CBE.</p>
    </div>
    <div class="work-details">
        <p>Confirmation of training in MATLAB, the high-performance language for technical computing, completed at Kalaignarkarunanidhi Institute of Technology (KIT), Coimbatore.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2021</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>
<div class="work-card" data-video-src="Works/Certificate/Certificate-PCB-design-at-kit(kalaignarkarunanidhi)collegecbe.jpg">
    <img src="Works/Certificate/Certificate-PCB-design-at-kit(kalaignarkarunanidhi)collegecbe.jpg" alt="KIT PCB Design" class="work-image">
    <div class="work-media-zoom"></div>
    <div class="work-overlay">
        <h3 class="work-title">PCB Design Training (KIT)</h3>
        <p class="work-description">Document for specialized training in Printed Circuit Board (PCB) design at KIT College, CBE.</p>
    </div>
    <div class="work-details">
        <p>Confirmation for completing training in Printed Circuit Board (PCB) design, a critical skill in electronics and hardware development, at Kalaignarkarunanidhi Institute of Technology (KIT), Coimbatore.</p>
        <div class="project-stats">
            <p><strong>Role:</strong> Trainee</p>
            <p><strong>Year:</strong> 2021</p>
        </div>
    </div>
    <button class="close-button" onclick="closePreview(event, 0)">×</button>
</div>


        </div>
    </section>
  
<script>

  window.addEventListener('load', () => {
    const loader = document.getElementById('page-loader');
    if (loader) {
      // Add fade-out class
      loader.classList.add('fade-out');

      // Wait for fade animation to finish, then remove from DOM
      setTimeout(() => {
        loader.style.display = 'none';
      }, 600); // match your CSS transition duration (0.6s)
    }
  });


const tabs = document.querySelectorAll("sort .item");
const sections = document.querySelectorAll(".portfolio-section");
const sortBar = document.querySelector("sort");
const headerOffset = 80; // height of your fixed header or extra space

// Click to scroll
tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");

    const id = tab.dataset.target;
    const target = document.getElementById(id);
    if (target) {
      const y = target.offsetTop - sortBar.offsetHeight - headerOffset;
      window.scrollTo({ top: y, behavior: "smooth" });
    }
  });
});

// Scrollspy: highlight active tab when 50% of section is visible
window.addEventListener("scroll", () => {
  const scrollMiddle = window.scrollY + window.innerHeight / 2; // middle of viewport
  let current = null;

  sections.forEach(section => {
    const sectionTop = section.offsetTop;
    const sectionBottom = sectionTop + section.offsetHeight;
    if (scrollMiddle >= sectionTop && scrollMiddle < sectionBottom) {
      current = section.id;
    }
  });

  if (current) {
    tabs.forEach(tab => {
      tab.classList.remove("active");
      if (tab.dataset.target === current) tab.classList.add("active");
    });
  }
});

// 🔑 CONSTANTS
    const SLIDE_DURATION_MS = 400; 
    const SLIDE_DURATION_S = (SLIDE_DURATION_MS / 1000) + 's'; 

    // Define the keyframes for slide animations dynamically
    const styleSheet = document.createElement('style');
    styleSheet.innerHTML = `
        @keyframes slideOutLeft {
            from { transform: translate(-50%, -50%); opacity: 1; }
            to { transform: translate(-150%, -50%); opacity: 0; }
        }
        @keyframes slideInRight {
            from { transform: translate(50%, -50%); opacity: 0; }
            to { transform: translate(-50%, -50%); opacity: 1; }
        }
        @keyframes slideOutRight {
            from { transform: translate(-50%, -50%); opacity: 1; }
            to { transform: translate(150%, -50%); opacity: 0; }
        }
        @keyframes slideInLeft {
            from { transform: translate(-150%, -50%); opacity: 0; }
            to { transform: translate(-50%, -50%); opacity: 1; }
        }
    `;
    document.head.appendChild(styleSheet);


    let activeCard = null;
    let cards = [];
    let placeholder = null;
    let overlay = null;
    let navButtons = {}; 

    // Utility Functions
    function getCardRect(card) {
        if (activeCard && placeholder && placeholder.parentNode && card === activeCard) {
             return placeholder.getBoundingClientRect();
        }
        return card.getBoundingClientRect();
    }

    function createOverlay() {
        if (overlay) return;
        overlay = document.createElement("div");
        overlay.style.cssText = `
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 900;
            cursor: pointer;
        `;
        document.body.appendChild(overlay);
        overlay.addEventListener('click', () => closePreview(null, 0)); 
        setTimeout(() => overlay.style.opacity = "1", 20);
        createNavigationButtons();
    }

    function removeOverlay() {
        if (overlay) {
            overlay.style.opacity = "0";
            overlay.addEventListener("transitionend", () => {
                overlay.remove();
                overlay = null;
            }, { once: true });
        }
        removeNavigationButtons();
    }

function loadAndPlayMedia(card, mediaSrc) {
    const mediaContainer = card.querySelector('.work-media-zoom');
    mediaContainer.innerHTML = ''; // Clear previous content

    // --- State Tracking for 2-second Minimum Load ---
    let mediaReady = false;
    let timerFinished = false;
    const MIN_LOAD_TIME_MS = 0; // 2 seconds

    // Function to run when both the media is loaded AND the 2-second timer is up
    const showMedia = () => {
        if (mediaReady && timerFinished) {
            // Find the loader element to remove it
            const loader = mediaContainer.querySelector('.media-loader');
            const mediaElement = mediaContainer.querySelector('.zoomed-content');
            const controls = mediaContainer.querySelector('.media-controls');

            if (loader) loader.remove();
            
            if (mediaElement) {
                mediaElement.style.opacity = '1'; // Fade media in
                
                if (mediaElement.tagName === 'VIDEO') {
                    mediaElement.play().catch(e => console.log("Video autoplay blocked after load:", e));
                }
            }
            if (controls) {
                controls.style.opacity = '1'; // Show controls
            }
        }
    };

    // 1. CREATE AND SHOW LOADER
    const loader = document.createElement('div');
    loader.classList.add('media-loader'); // Assumes you have CSS for this spinner
    mediaContainer.appendChild(loader);
    
    // Start the minimum 2-second timer
    setTimeout(() => {
        timerFinished = true;
        showMedia();
    }, MIN_LOAD_TIME_MS);
    
    // Create media controls container
    const controls = document.createElement('div');
    controls.classList.add('media-controls');
    controls.style.opacity = '0'; // Hide controls until media loads
    controls.style.transition = 'opacity 0.3s ease'; 

    let mediaElement;
    let isVideo = false;

    if (mediaSrc.endsWith('.mp4') || mediaSrc.endsWith('.webm')) {
        // --- VIDEO LOGIC ---
        isVideo = true;
        const video = document.createElement('video');
        video.src = mediaSrc;
        video.autoplay = true;
        video.loop = true;
        video.muted = true;
        video.playsInline = true;
        video.classList.add('zoomed-content');
        video.style.opacity = '0'; // Start invisible
        video.style.transition = 'opacity 0.4s ease'; 
        mediaContainer.appendChild(video);
        mediaElement = video;

        // Mute/Unmute button
        const muteButton = document.createElement('button');
        muteButton.classList.add('media-button');
        muteButton.innerHTML = '<i class="fas fa-volume-mute"></i>';
        muteButton.title = 'Unmute';
        muteButton.addEventListener('click', () => {
            video.muted = !video.muted;
            muteButton.innerHTML = video.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
            muteButton.title = video.muted ? 'Unmute' : 'Mute';
        });
        controls.appendChild(muteButton);

        // Toggle play/pause on video click/touch
        video.addEventListener('click', () => {
            if (video.paused) {
                video.play().catch(e => console.log("Video playback blocked:", e));
            } else {
                video.pause();
            }
        });

        // Update button states on fullscreen change
        video.addEventListener('fullscreenchange', () => {
            // Find fullscreen button dynamically, or assume it's the last child added to controls
            const fsButton = controls.querySelector('.media-button:last-child'); 
            if (fsButton) {
                fsButton.innerHTML = document.fullscreenElement ? '<i class="fas fa-compress"></i>' : '<i class="fas fa-expand"></i>';
                fsButton.title = document.fullscreenElement ? 'Exit Fullscreen' : 'View Fullscreen';
            }
        });

    } else if (mediaSrc.endsWith('.gif') || mediaSrc.endsWith('.jpg') || mediaSrc.endsWith('.png')) {
        // --- IMAGE LOGIC ---
        const img = document.createElement('img');
        img.src = mediaSrc;
        img.classList.add('zoomed-content');
        img.style.opacity = '0'; // Start invisible
        img.style.transition = 'opacity 0.4s ease'; // Add fade-in transition
        mediaContainer.appendChild(img);
        mediaElement = img;

        // Update button states on fullscreen change
        img.addEventListener('fullscreenchange', () => {
            // Find fullscreen button dynamically
            const fsButton = controls.querySelector('.media-button:last-child');
            if (fsButton) {
                fsButton.innerHTML = document.fullscreenElement ? '<i class="fas fa-compress"></i>' : '<i class="fas fa-expand"></i>';
                fsButton.title = document.fullscreenElement ? 'Exit Fullscreen' : 'View Fullscreen';
            }
        });
    }

    // Fullscreen button (for both)
    // Fullscreen button (for both)
const fullscreenButton = document.createElement('button');
fullscreenButton.classList.add('media-button');
fullscreenButton.innerHTML = '<i class="fas fa-expand"></i>';
fullscreenButton.title = 'View Fullscreen';

fullscreenButton.addEventListener('click', () => {
    if (document.fullscreenElement) {
        // If already in fullscreen, exit it
        document.exitFullscreen().catch(e => console.error("Exit Fullscreen failed:", e));
    } else if (mediaElement && mediaElement.requestFullscreen) {
        // Otherwise, enter fullscreen
        mediaElement.requestFullscreen().catch(e => console.error("Fullscreen failed:", e));
    }
});
controls.appendChild(fullscreenButton);
    mediaContainer.appendChild(controls);


    // 2. HIDE LOADER WHEN MEDIA IS READY AND 2 SECONDS HAVE PASSED
    if (mediaElement) {
        const mediaReadyEvent = isVideo ? 'loadeddata' : 'load';

        mediaElement.addEventListener(mediaReadyEvent, () => {
            mediaReady = true;
            showMedia(); // Check if the timer is also finished
        }, { once: true });
        
        // Handle media loading errors (like 404)
        mediaElement.addEventListener('error', () => {
            loader.remove(); // Remove loader
            mediaElement.remove(); // Remove broken media element
            controls.remove(); // Remove controls
            const errorFallback = document.createElement('div');
            errorFallback.style.cssText = 'color: #fff; text-align: center; padding: 20px;';
            errorFallback.textContent = `Failed to load ${isVideo ? 'video' : 'image'}. Please check the media source.`;
            mediaContainer.appendChild(errorFallback);
        }, { once: true });

    } else {
        // Handle case where mediaSrc is neither video nor image
        loader.remove();
        const fallback = document.createElement('div');
        fallback.style.cssText = 'color: #fff; text-align: center; padding: 20px;';
        fallback.textContent = 'Unsupported media file type.';
        mediaContainer.appendChild(fallback);
    }
}
    function stopAndRemoveMedia(card) {
        const mediaContainer = card.querySelector('.work-media-zoom');
        const video = mediaContainer.querySelector('video');
        if (video) {
            video.pause();
            // Optionally remove src to free up memory immediately
            video.removeAttribute('src'); 
        }
        mediaContainer.innerHTML = ''; // Clear the container
    }
    // --- END MEDIA HANDLER FUNCTIONS ---


    function updatePlaceholder(currentCard, nextCard = null) {
        if (nextCard) {
            // --- Navigation: Move Placeholder ---
            const targetRect = nextCard.getBoundingClientRect();
            
            if (!placeholder) {
                 placeholder = document.createElement("div");
                 placeholder.classList.add("placeholder");
                 const currentRect = currentCard.getBoundingClientRect();
                 placeholder.style.width = currentRect.width + "px";
                 placeholder.style.height = currentRect.height + "px";
                 currentCard.parentNode.insertBefore(placeholder, currentCard);
            }
            
            placeholder.style.visibility = 'visible'; 
            
            placeholder.style.width = targetRect.width + "px";
            placeholder.style.height = targetRect.height + "px";

            if (nextCard.parentNode) {
                nextCard.parentNode.insertBefore(placeholder, nextCard);
            }
            
        } else if (currentCard) {
            // --- Initial Zoom In: Create Placeholder ---
            if (placeholder) placeholder.remove();

            const computedStyle = window.getComputedStyle(currentCard);
            const rect = currentCard.getBoundingClientRect();

            placeholder = document.createElement("div");
            placeholder.classList.add("placeholder");

            placeholder.style.width = rect.width + "px"; 
            placeholder.style.height = rect.height + "px";
            
            placeholder.style.marginTop = computedStyle.marginTop;
            placeholder.style.marginBottom = computedStyle.marginBottom;
            placeholder.style.marginLeft = computedStyle.marginLeft;
            placeholder.style.marginRight = computedStyle.marginRight;
            
            if (currentCard.parentNode) {
                currentCard.parentNode.insertBefore(placeholder, currentCard);
            }
        }
    }


    function finalCleanup(card) {
        // Essential: Remove all temporary styles
        card.style.pointerEvents = "auto";
        card.style.position = "";
        card.style.transition = "";
        card.style.animation = "";
        card.style.zIndex = "";
        card.style.opacity = "";
        
        // Ensure all dimensional overrides are removed
        card.style.width = "";
        card.style.height = "";
        card.style.minHeight = "";
        card.style.maxWidth = ""; 

        card.style.top = "";
        card.style.left = "";
        card.style.transform = "";
        card.classList.remove("zoomed");

        // Only restore the card to its original place if it's a Zoom Out (activeCard is null)
        if (activeCard === null && placeholder && placeholder.parentNode) {
            placeholder.replaceWith(card);
            placeholder = null;
        }

        // Ensure all cards are visible and interactive again
        document.querySelectorAll('.work-card').forEach(c => {
            c.style.display = "block";
            c.style.pointerEvents = "auto";
        });
    }

    // Navigation buttons (Unchanged)
  function createNavigationButtons() {
    const createButton = (id, symbol, handler) => {
        const btn = document.createElement('button');
        btn.id = id;
        btn.innerHTML = symbol;
        
        // Add a class for CSS styling
        btn.classList.add('nav-button'); 
        
        // Keep essential fixed positioning inline
        btn.style.cssText = `
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1100;
            opacity: 0; 
            transition: opacity 0.3s, background 0.3s;
        `;
        
        btn.addEventListener('click', handler);
        document.body.appendChild(btn);
        return btn;
    };


        navButtons.left = createButton('nav-left', '&#10094;', (e) => { e.stopPropagation(); navigate(-1); });
        navButtons.left.style.left = '20px';

        navButtons.right = createButton('nav-right', '&#10095;', (e) => { e.stopPropagation(); navigate(1); });
        navButtons.right.style.right = '20px';

        setTimeout(() => {
            if (navButtons.left) navButtons.left.style.opacity = '1';
            if (navButtons.right) navButtons.right.style.opacity = '1';
        }, SLIDE_DURATION_MS + 50); 
    }

    function removeNavigationButtons() {
        if (navButtons.left) {
            navButtons.left.style.opacity = '0';
            navButtons.left.addEventListener('transitionend', () => navButtons.left.remove(), { once: true });
            navButtons.left = null;
        }
        if (navButtons.right) {
            navButtons.right.style.opacity = '0';
            navButtons.right.addEventListener('transitionend', () => navButtons.right.remove(), { once: true });
            navButtons.right = null;
        }
    }

    function setNavigationState(card) {
        const currentIndex = cards.indexOf(card);
        if (navButtons.left) {
            navButtons.left.style.visibility = (currentIndex === 0) ? 'hidden' : 'visible';
            navButtons.left.style.pointerEvents = (currentIndex === 0) ? 'none' : 'auto';
        }
        if (navButtons.right) {
            navButtons.right.style.visibility = (currentIndex === cards.length - 1) ? 'hidden' : 'visible';
            navButtons.right.style.pointerEvents = (currentIndex === cards.length - 1) ? 'none' : 'auto';
        }
    }

    // Main Preview Functions
    function openPreview(card, direction = 0) {
        const isZoom = direction === 0;
        const initialRect = isZoom ? card.getBoundingClientRect() : getCardRect(card);

        if (isZoom) {
            updatePlaceholder(card);
            if (!overlay) createOverlay();
        }
        
        activeCard = card;

        // 🔑 Load dynamic media content
        if (card.dataset.videoSrc) {
            loadAndPlayMedia(card, card.dataset.videoSrc);
        }

        card.style.position = "fixed";
        card.style.width = initialRect.width + "px";
        card.style.height = initialRect.height + "px";
        card.style.minHeight = initialRect.height + "px";
        card.style.transition = "none"; 
        card.style.animation = "none";
        card.style.zIndex = 1000;
        card.style.pointerEvents = "auto";
        card.style.opacity = "1";
        card.classList.add("zoomed");
        card.style.display = 'block'; 

        if (isZoom) {
            card.style.top = initialRect.top + "px";
            card.style.left = initialRect.left + "px";
            card.style.transform = "scale(1)";
        } else if (direction === 1) {
            card.style.top = "50%";
            card.style.left = "50%";
            card.style.transform = "translate(150%, -50%)"; 
            card.style.opacity = "0";
        } else if (direction === -1) {
            card.style.top = "50%";
            card.style.left = "50%";
            card.style.transform = "translate(-150%, -50%)"; 
            card.style.opacity = "0";
        }

        setTimeout(() => {
            card.style.top = "50%";
            card.style.left = "50%";
            card.style.width = "600px";
            card.style.maxWidth = "90%";
            card.style.height = "auto";
            card.style.minHeight = "auto";
            card.style.transform = "translate(-50%, -50%)";

            if (isZoom) {
                card.style.transition = "all 0.4s cubic-bezier(0.25,0.46,0.45,0.94)";
            } else {
                card.style.opacity = "1";
                // Fixed transition for simple slide
                card.style.transition = `transform ${SLIDE_DURATION_S} ease-out, opacity ${SLIDE_DURATION_S} ease-out, box-shadow 0.4s ease`;
            }

            card.addEventListener("transitionend", function handler() {
                const details = card.querySelector(".work-details");
                details.style.opacity = "1";
                details.style.maxHeight = "1000px";
                details.style.visibility = "visible";
                card.style.transition = "none";
                setNavigationState(card); 
                card.removeEventListener("transitionend", handler);
            }, { once: true });
        }, 20);
    }

    function closePreview(e, direction = 0) {
        const card = e && e.target && e.target.classList.contains('close-button') 
            ? e.target.closest('.work-card') 
            : (e && e.tagName ? e : activeCard);
        
        if (!card) return;
        if (e && e.stopPropagation) e.stopPropagation();

        // 🔑 Stop and remove dynamic media content
        stopAndRemoveMedia(card);
        
        const isZoomOut = direction === 0;

        const details = card.querySelector(".work-details");
        details.style.opacity = "0";
        details.style.maxHeight = "0";
        details.style.visibility = "hidden";

        card.classList.remove("zoomed");
        card.style.animation = "";
        
        if (isZoomOut) {
            const rect = getCardRect(card);
            activeCard = null; 
            removeOverlay();

            card.style.transition = "all 0.4s cubic-bezier(0.25,0.46,0.45,0.94)"; 

            card.style.width = rect.width + "px";
            card.style.height = rect.height + "px";
            card.style.minHeight = rect.height + "px"; 
            card.style.top = rect.top + "px";
            card.style.left = rect.left + "px";
            card.style.transform = "none"; 

            card.addEventListener("transitionend", function handler() {
                finalCleanup(card); 
                card.removeEventListener("transitionend", handler);
            }, { once: true });

        } else {
            const animationName = direction === 1 ? 'slideOutLeft' : 'slideOutRight'; 
            card.style.transition = "none";
            card.style.animation = `${animationName} ${SLIDE_DURATION_S} ease-in-out forwards`;
            
            card.addEventListener("animationend", function handler() {
                card.style.animation = 'none';
                card.style.display = "none"; 
                finalCleanup(card);
                card.removeEventListener("animationend", handler);
            }, { once: true });
        }
    }

    function navigate(direction) {
        if (!activeCard) return;

        const currentIndex = cards.indexOf(activeCard);
        const nextIndex = currentIndex + direction;

        if (nextIndex < 0 || nextIndex >= cards.length) return;

        const nextCard = cards[nextIndex];
        
        updatePlaceholder(activeCard, nextCard);

        nextCard.style.display = 'none';

        closePreview(activeCard, direction); 
        
        setTimeout(() => {
            openPreview(nextCard, direction);
        }, 50); 
    }

    // Initialize
    document.querySelectorAll('.work-card').forEach(card => {
        cards.push(card);
        card.addEventListener('click', function(e) {
            if (e.target.classList.contains('close-button')) return;
            if (card.classList.contains('zoomed')) return;
            activeCard = null; 
            openPreview(card, 0);
        });
    });

    document.addEventListener('keydown', e => {
        if (!activeCard) return;
        if (e.key === "ArrowLeft") navigate(-1);
        if (e.key === "ArrowRight") navigate(1);
        if (e.key === "Escape") closePreview(activeCard, 0); 
    });

// =========================================================
// ADD FULLSCREEN EXIT LISTENER HERE
// =========================================================
document.addEventListener('fullscreenchange', () => {
    // Find the currently active media element
    const currentMediaElement = activeCard ? activeCard.querySelector('.zoomed-content') : null;

    if (currentMediaElement) {
        // If we are NOT in fullscreen anymore (user pressed ESC or back button on mobile)
        if (!document.fullscreenElement) {
            
            // Re-apply the fullscreen button update logic here, 
            // as the media-specific listeners might not catch all native exits.
            const fsButton = activeCard.querySelector('.media-button:last-child');
            if (fsButton) {
                 fsButton.innerHTML = '<i class="fas fa-expand"></i>';
                 fsButton.title = 'View Fullscreen';
            }
        }
    }
});
//
// Menu
//
const hamburger = document.querySelector('.hamburger');
const nav = document.querySelector('header nav');

hamburger.addEventListener('click', () => {
  hamburger.classList.toggle('active');
  nav.classList.toggle('active');
});

// Optional: Close nav when a link is clicked
document.querySelectorAll('header nav a').forEach(link => {
  link.addEventListener('click', () => {
    hamburger.classList.remove('active');
    nav.classList.remove('active');
  });
});


// =========================================================
// NEW CODE FOR CLOSING ON OUTSIDE CLICK/TOUCH
// =========================================================

document.addEventListener('click', (event) => {
  // Check if the navigation menu is currently open (i.e., has the 'active' class)
  const isNavOpen = nav.classList.contains('active');

  // Check if the click/touch target is OUTSIDE both the navigation and the hamburger
  const isClickInsideNav = nav.contains(event.target);
  const isClickInsideHamburger = hamburger.contains(event.target);

  // If the menu is open AND the click is NOT inside the nav AND the click is NOT on the hamburger...
  if (isNavOpen && !isClickInsideNav && !isClickInsideHamburger) {
    // ...then close the menu by removing the 'active' classes
    nav.classList.remove('active');
    hamburger.classList.remove('active');
  }
});

</script>
</body>
</html>